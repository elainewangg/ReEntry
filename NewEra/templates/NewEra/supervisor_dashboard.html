{% extends "NewEra/base.html" %}

{% block page_specific_styles %}
<!-- {% load static %}
<link href="{% static 'NewEra/index_styles.css' %}" rel="stylesheet" type="text/css"> -->
{% endblock %}

{% block title %}
    Supervisor Dashboard
{% endblock %}

{% block content %}
    <h1 style="margin: auto; margin-top: 50px; text-align: center;">
        Supervisor Dashboard
    </h1>

    <div class="container">  
        <hr><br>
        <!-- SOW table display -->
        <h2>SOWs:</h2>
        {% if sows.count > 0 %}
            <div style="overflow-x: auto;">
                <table>
                    <tr>
                        <th>Username</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Organization</th>
                        <th>Active?</th>
                    </tr>
                    {% for sow in sows %}
                        {% if sow.organization.name == user.organization.name %}
                        <tr>
                            <td>{{ sow.username }}</td>
                            <td>{{ sow.first_name }}</td>
                            <td>{{ sow.last_name }}</td>
                            <td>{{ sow.email }}</td>
                            <td>{{ sow.phone }}</td>
                            <td>{{ sow.organization.name }}</td>
                            {% if sow.is_active %}
                                <td>&#10004;</td>
                            {% else %}
                                <td>&#10060;</td>
                            {% endif %}
                        </tr>
                        {% endif %}
                    {% endfor %}
                </table>
            </div>
            
        {% else %}
            <em><p style="margin: auto;">There are no SOWs in the system.</p></em>
        {% endif %}

        <br><hr><br>

        <!-- Supervisor table display -->
        <h2>Supervisors:</h2>
        {% if supervisors.count > 0 %}
            <div style="overflow-x: auto;">
                <table>
                    <tr>
                        <th>Username</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Organization</th>
                        <th>Active?</th>
                    </tr>
                    {% for supervisor in supervisors %}
                        {% if supervisor.organization.name == user.organization.name %}
                        <tr>
                            <td>{{ supervisor.username }}</td>
                            <td>{{ supervisor.first_name }}</td>
                            <td>{{ supervisor.last_name }}</td>
                            <td>{{ supervisor.email }}</td>
                            <td>{{ supervisor.phone }}</td>
                            <td>{{ supervisor.organization.name }}</td>
                            {% if supervisor.is_active %}
                                <td>&#10004;</td>
                            {% else %}
                                <td>&#10060;</td>
                            {% endif %}
                        </tr>
                        {% endif %}
                    {% endfor %}
                </table>
            </div>
            
        {% else %}
            <em><p style="margin: auto;">There are no Supervisors in the system.</p></em>
        {% endif %}
    </div>
{% endblock %}
